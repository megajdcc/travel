import{a9 as e}from"./index.453ae20a.js";const n=e("solicitudNegocio",{state(){return{solicitud:{id:null,nombre:"",descripcion:"",breve:"",solicitud_id:"",comision:6,tipo_comision:1,url:null,email:null,telefono:null,sitio_web:"",direccion:"",codigo_postal:"",ciudad_id:null,estado_id:null,lat:10,lng:10,logo:null,foto:null,situacion:1,comentario:"",usuario_id:null,solicitud:null,ciudad:null,estado:null,usuario:null},solicitudes:[]}},getters:{draft(i){return clone(i.solicitud)}},actions:{setSolicitud(i){this.solicitud=i},setSolicitudes(i){this.solicitudes=i},clear(){this.solicitud={id:null,nombre:"",descripcion:"",breve:"",solicitud_id:"",comision:0,tipo_comision:1,url:null,email:null,telefono:null,sitio_web:"",direccion:"",codigo_postal:"",ciudad_id:null,estado_id:null,lat:10,lng:10,logo:null,foto:null,situacion:1,comentario:"",usuario_id:null,solicitud:null,ciudad:null,estado:null,usuario:null}},push(i){this.solicitudes.push(i)},put(i){this.solicitudes.splice(this.solicitudes.findIndex(o=>o.id===i),1)},capturar(i){let o=this.solicitudes.find(l=>l.id===i);o&&(this.solicitud=o)},update(i){let o=this.solicitudes.findIndex(l=>l.id===i.id);o!=-1&&(this.solicitudes[o]=i,this.solicitud.id===i.id&&(this.solicitud=i))},fetchData(i){return new Promise((o,l)=>{axios.post("/api/negocio/solicituds/fetch/data",i).then(({data:t})=>{this.setSolicitudes(t.solicitudes),o(t)}).catch(t=>l(t))})},guardar(i){return new Promise((o,l)=>{let t=new FormData;Object.keys(i).forEach(s=>{t.append(s,i[s])}),i.id?(t.append("_method","put"),axios.post(`/api/negocio/solicituds/${i.id}`,t,{headers:{ContentType:"multipart/form-data; boundary=something"}}).then(({data:s})=>{s.result&&this.update(s.solicitud),o(s)}).catch(s=>l(s))):axios.post("/api/negocio/solicituds",t,{headers:{ContentType:"multipart/form-data; boundary=something"}}).then(({data:s})=>{s.result&&this.push(s.solicitud),o(s)}).catch(s=>l(s))})},eliminar(i){return new Promise((o,l)=>{axios.delete(`/api/negocio/solicituds/${i}`).then(({data:t})=>{t.result&&this.put(i),o(t)}).catch(t=>l(t))})},async getsolicitud(i){return await new Promise((o,l)=>{axios.get(`/api/negocio/solicituds/${i}/get`).then(({data:t})=>{this.push(t),o(t)}).catch(t=>l(t))})}}});export{n as u};
