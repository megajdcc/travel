import{a9 as m,ae as p,e as t}from"./index.70b226c4.js";const h=m("permiso",{state(){return{permiso:{id:null,nombre:""},permisos:[]}},getters:{draft:s=>p.exports.clone(s.permiso),getPermissionUser:s=>i=>s.permisos.map(o=>{let e=null;if(i.permissions){const r=i.permissions.find(n=>n.id==o.id);e=r?JSON.parse(r.pivot.actions):null}return{module:o.nombre,read:e?!!e.find(r=>r=="read"):!1,write:e?!!e.find(r=>r=="write"):!1,update:e?!!e.find(r=>r=="update"):!1,delete:e?!!e.find(r=>r=="delete"):!1}})},actions:{setPermiso(s){this.permiso=s},setPermisos(s){this.permisos=s},clearPermiso(){this.permiso={id:null,nombre:""}},capturarPermiso(s){this.permiso=this.permisos.find(i=>i.id===s)},putPermiso(s){this.permisos.splice(this.permisos.findIndex(i=>i.id==s),1)},pushPermiso(s){var i=this.permisos.find(o=>o.id==s.id);i?this.permisos.forEach((o,e)=>{o.id==s.id&&(this.permisos[e]=s)}):this.permisos.push(s)},cargarPermisos(){const s=t();s.toogleLoading(),axios.get("/api/cargar/permisos").then(({data:i})=>{this.setPermisos(i)}).catch(i=>{console.log(i)}).then(()=>{s.toogleLoading()})},guardarPermiso(s){const i=t();return new Promise((o,e)=>{i.toogleLoading(),this.permiso.id?axios.put("/api/permisos/"+this.permiso.id,s).then(({data:r})=>{r.result&&this.pushPermiso(r.permiso),o(r)}).catch(r=>e(r)).then(()=>{i.toogleLoading()}):axios.post("/api/permisos",s).then(({data:r})=>{r.result&&this.pushPermiso(r.permiso),o(r)}).catch(r=>e(r)).then(()=>{i.toogleLoading()})})},async eliminarPermiso(s){return new Promise((i,o)=>{axios.delete("/api/permisos/"+s).then(({data:e})=>{e.result&&this.putPermiso(s),i(e)}).catch(e=>o(e)).then(()=>{})})},fetchData(s){return new Promise((i,o)=>{axios.post("/api/fetch/permisos",s).then(({data:e})=>{this.setPermisos(e.permisos),i(e)}).catch(e=>o(e))})},getPermiso(s){return new Promise((i,o)=>{axios.get(`/api/permisos/${s}/get`).then(({data:e})=>{this.pushPermiso(e),i(e)}).catch(e=>o(e))})}}});export{h as u};
