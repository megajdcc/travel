import{e as L,d as Q,g as $,P as z,Q as g,h as G,r as a,k as H,o as h,v as w,w as t,a as o,m as n,l as e,p as V,q as y,n as p,s as J,b as i}from"./index.70b226c4.js";import{u as K}from"./vee-validate.esm.b0482e71.js";import{u as O}from"./forms.9def3427.js";const W=i("span",null," Al desactivar tu cuenta, se desactivar\xE1 tu perfil y se borrar\xE1 tu nombre y tu foto de la mayor parte de TravelPoints. ",-1),X=i("span",{class:"text-danger"},"*",-1),Y=i("span",{class:"text-danger"},"*",-1),Z=i("span",null,[n("Los campos marcados con "),i("strong",{class:"text-danger"},"*"),n(" son obligatorios.")],-1),ee=i("hr",null,null,-1),ne={__name:"desactivar",setup(te){const x=L(),m=Q(),{passwordFieldType:k,togglePasswordVisibility:_,passwordToggleIcon:C}=O(),{logout:S}=$(),j=z({mensaje:g().required().min(10),contrasena:g().required()}),{handleSubmit:D,errors:r,useFieldModel:q,meta:N}=K({initialValues:m.usuario,validationSchema:j}),[c,u]=q(["mensaje","contrasena"]),P=D((b,l)=>{m.desactivarCuenta(b).then(({result:s})=>{s?(toast.info("Su cuenta ha sido desactivada, si vuelves a entrar al sistema, tu cuenta se activar\xE1 autom\xE1ticamente..."),S()):toast.info("No pudimos desactivar t\xFA cuenta, int\xE9ntelo de nuevo mas tarde")}).catch(s=>{console.log(s),s.response.status===422&&l.setErrors(s.response.data.errors)})}),T=G(()=>x.loading);return(b,l)=>{const s=a("b-form-textarea"),f=a("b-form-invalid-feedback"),v=a("b-form-group"),U=a("b-form-input"),B=a("font-awesome"),F=a("b-input-group-append"),A=a("b-input-group"),M=a("b-button"),R=a("b-form"),E=a("b-card"),I=H("loading");return h(),w(E,{title:"Desactivar Cuenta"},{default:t(()=>[W,o(R,{onSubmit:p(e(P),["prevent"])},{default:t(()=>[o(v,null,{label:t(()=>[n(" Nos intersa saber por qu\xE9 nos dejas "),X]),default:t(()=>[o(s,{modelValue:e(c),"onUpdate:modelValue":l[0]||(l[0]=d=>V(c)?c.value=d:null),state:!e(r).mensaje,rows:3,placeholder:"Un breve mensaje.."},null,8,["modelValue","state"]),o(f,null,{default:t(()=>[n(y(e(r).mensaje),1)]),_:1})]),_:1}),o(v,null,{label:t(()=>[n(" Contrase\xF1a actual: "),Y]),default:t(()=>[o(A,{state:!e(r).contrasena},{default:t(()=>[o(U,{id:"password",modelValue:e(u),"onUpdate:modelValue":l[1]||(l[1]=d=>V(u)?u.value=d:null),type:e(k),name:"login-password",placeholder:"Password",state:!e(r).contrasena},null,8,["modelValue","type","state"]),o(F,{"is-text":"",onClick:p(e(_),["stop"]),class:"cursor-pointer"},{default:t(()=>[o(B,{icon:e(C),class:"cursor-pointer",onClick:p(e(_),["stop"])},null,8,["icon","onClick"])]),_:1},8,["onClick"]),o(f,{state:e(r).contrasena},{default:t(()=>[n(y(e(r).contrasena),1)]),_:1},8,["state"])]),_:1},8,["state"])]),_:1}),Z,ee,J((h(),w(M,{variant:"primary",type:"submit",title:"Desactivar cuenta",disabled:!e(N).valid},{default:t(()=>[n(" Desactivar cuenta ")]),_:1},8,["disabled"])),[[I,e(T)]])]),_:1},8,["onSubmit"])]),_:1})}}};export{ne as default};
