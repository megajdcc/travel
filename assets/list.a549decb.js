import{M as T,_ as V,r as o,o as h,v as D,w as a,a as t,m as k,O as q,q as O}from"./index.52d87dda.js";import{u as S}from"./faq.bc1d40d6.js";import{u as B}from"./useFilterTable.34a2cd4b.js";function w(){const l=S(),s=[{key:"id",sortable:!0,label:"#"},{key:"pregunta",sortable:!0,label:"pregunta"},{key:"categoria_id",sortable:!0,label:"Categor\xEDa"},{key:"usuario_id",sortable:!0,label:"Creador"},{key:"actions",sortable:!1}],{perPageOptions:g,currentPage:e,perPage:m,searchQuery:p,sortBy:u,isSortDirDesc:n,refTable:f,total:i,dataMeta:c,refetchData:d}=B();return{perPageOptions:g,currentPage:e,perPage:m,searchQuery:p,sortBy:u,isSortDirDesc:n,refTable:f,total:i,dataMeta:c,refetchData:d,tableColumns:s,fetchData:(y,b)=>{l.fetchFaqs({perPage:m.value,currentPage:e.value,q:p.value,sortBy:u.value,sortDirDesc:n.value}).then(({total:P,faqs:v})=>{i.value=P,b(v)}).catch(P=>{toast.error("NO se pudo cargar la data")})},eliminar:y=>{l.eliminarFaq(y).then(({result:b})=>{b?(toast.success("Se ha eliminado con \xE9xito la pregunta"),d()):toast.error("No se pudo, eliminar la pregunta, int\xE9ntelo de nuevo mas tarde..")})}}}const x={components:{PerPage:()=>V(()=>import("./PerPage.db17fdea.js"),["PerPage.db17fdea.js","index.52d87dda.js","index.e7c36ab6.css"],import.meta.url),PaginateTable:()=>V(()=>import("./PaginateTable.50636861.js"),["PaginateTable.50636861.js","index.52d87dda.js","index.e7c36ab6.css"],import.meta.url)},setup(){const{perPageOptions:l,currentPage:s,perPage:g,searchQuery:e,sortBy:m,isSortDirDesc:p,refTable:u,total:n,dataMeta:f,refetchData:i,tableColumns:c,fetchData:d,eliminar:_}=w();return{perPageOptions:l,currentPage:s,perPage:g,searchQuery:e,sortBy:m,isSortDirDesc:p,refTable:u,total:n,dataMeta:f,refetchData:i,tableColumns:c,fetchData:d,eliminar:_}}};function E(l,s,g,e,m,p){const u=o("per-page"),n=o("b-col"),f=o("b-form-input"),i=o("feather-icon"),c=o("b-button"),d=o("b-input-group"),_=o("b-row"),C=o("b-button-group"),y=o("b-table"),b=o("paginate-table"),P=o("b-container"),v=o("b-card");return h(),D(v,null,{default:a(()=>[t(P,{fluid:""},{default:a(()=>[t(_,{class:"mb-1"},{default:a(()=>[t(n,{cols:"12",md:"6"},{default:a(()=>[t(u,{modelValue:e.perPage,"onUpdate:modelValue":s[0]||(s[0]=r=>e.perPage=r),perPageOptions:e.perPageOptions},null,8,["modelValue","perPageOptions"])]),_:1}),t(n,{cols:"12",md:"6"},{default:a(()=>[t(d,{size:"sm"},{append:a(()=>[l.$can("write","faqs")?(h(),D(c,{key:0,to:{name:"create.faq"},variant:"primary",title:"Crear Faq",class:"d-flex align-items-center"},{default:a(()=>[t(i,{icon:"EditIcon",size:"16"}),k(" Crear ")]),_:1},8,["to"])):q("",!0)]),default:a(()=>[t(f,{modelValue:e.searchQuery,"onUpdate:modelValue":s[1]||(s[1]=r=>e.searchQuery=r),type:"search",placeholder:"Buscar"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(_,null,{default:a(()=>[t(n,{cols:"12"},{default:a(()=>[t(y,{ref:"refTable",fields:e.tableColumns,items:e.fetchData,"sort-by":e.sortBy,"sort-desc":e.isSortDirDesc,"primary-key":"id",hover:"",bordered:"",small:"",striped:"","show-empty":"","empty-text":"Sin Data"},{"cell(categoria_id)":a(({item:r})=>[k(O(r.categoria.nombre),1)]),"cell(usuario_id)":a(({item:r})=>[k(O(r.usuario.nombre||"Sin definir"),1)]),"cell(actions)":a(({item:r})=>[t(C,{size:"sm"},{default:a(()=>[l.$can("update","faqs")?(h(),D(c,{key:0,to:{name:"edit.faq",params:{id:r.id}},variant:"primary"},{default:a(()=>[t(i,{icon:"EditIcon"})]),_:2},1032,["to"])):q("",!0),l.$can("delete","faqs")?(h(),D(c,{key:1,onClick:F=>e.eliminar(r.id),variant:"danger"},{default:a(()=>[t(i,{icon:"TrashIcon"})]),_:2},1032,["onClick"])):q("",!0)]),_:2},1024)]),_:1},8,["fields","items","sort-by","sort-desc"])]),_:1})]),_:1}),t(_,{class:"mt-1"},{default:a(()=>[t(n,{cols:"12"},{default:a(()=>[t(b,{dataMeta:e.dataMeta,perPage:e.perPage,currentPage:e.currentPage,total:e.total},null,8,["dataMeta","perPage","currentPage","total"])]),_:1})]),_:1})]),_:1})]),_:1})}const Q=T(x,[["render",E]]);export{Q as default};
