import{M as N,_ as E,B as V,r,o as f,v as C,w as e,al as L,a as t,m as I,O as B,b as w,N as M,q as D,c as S}from"./index.48deae7d.js";import{u as z}from"./categoria.3076e65a.js";import{u as Q}from"./useFilterTable.ed5bc676.js";function A(){const n=z(),l=[{key:"id",sortable:!0,label:"#",stickyColumn:!0,variant:"primary"},{key:"categoria",sortable:!0,label:"Categor\xEDa"},{key:"actions",sortable:!0,label:"Actions"}],{perPageOptions:b,currentPage:a,perPage:y,searchQuery:P,sortBy:d,isSortDirDesc:c,refTable:h,total:s,dataMeta:i,refetchData:m}=Q();return{tableColumns:l,perPageOptions:b,currentPage:a,perPage:y,searchQuery:P,sortBy:d,isSortDirDesc:c,refTable:h,total:s,dataMeta:i,refetchData:m,fetchData:(p,u)=>{n.fetchData({currentPage:a.value,sortBy:d.value,q:P.value,perPage:y.value,sortDirDesc:c.value}).then(({total:v,categorias:g})=>{s.value=v,u(g)}).catch(v=>{toast.error("Error cargando data")})},eliminar:p=>{n.eliminar(p).then(({result:u})=>{u?(m(),toast.info("Categor\xEDa eliminada con \xE9xito")):toast.error("La categor\xEDa no se pudo eliminar")}).catch(u=>{toast.error("La categor\xEDa no se pudo eliminar")})}}}const q={components:{PerPage:()=>E(()=>import("./PerPage.1cc5407b.js"),["PerPage.1cc5407b.js","index.48deae7d.js","index.e7c36ab6.css"],import.meta.url),PaginateTable:()=>E(()=>import("./PaginateTable.f6190d83.js"),["PaginateTable.f6190d83.js","index.48deae7d.js","index.e7c36ab6.css"],import.meta.url)},setup(){const n=V(null),l=V(""),b=V(!1),{perPageOptions:a,currentPage:y,perPage:P,searchQuery:d,sortBy:c,isSortDirDesc:h,refTable:s,total:i,dataMeta:m,refetchData:_,tableColumns:k,fetchData:p,eliminar:u}=A();return{perPageOptions:a,currentPage:y,perPage:P,searchQuery:d,sortBy:c,isSortDirDesc:h,refTable:s,total:i,dataMeta:m,refetchData:_,tableColumns:k,fetchData:p,eliminar:u,mostrarImagen:g=>{n.value=L(g).toLowerCase(),l.value=g,b.value=!0},showImagen:b,ext:n,urlImagen:l}}},R=w("li",{class:"font-weight-bolder text-warning"},"Descripci\xF3n",-1),U=["textContent"];function F(n,l,b,a,y,P){const d=r("per-page"),c=r("b-col"),h=r("b-form-input"),s=r("feather-icon"),i=r("b-button"),m=r("b-input-group"),_=r("b-row"),k=r("b-link"),p=r("b-button-group"),u=r("b-table"),v=r("paginate-table"),g=r("b-container"),T=r("b-card");return f(),C(T,null,{default:e(()=>[t(g,{fluid:""},{default:e(()=>[t(_,{class:"mb-1"},{default:e(()=>[t(c,{cols:"12",md:"6"},{default:e(()=>[t(d,{modelValue:a.perPage,"onUpdate:modelValue":l[0]||(l[0]=o=>a.perPage=o),perPageOptions:a.perPageOptions},null,8,["modelValue","perPageOptions"])]),_:1}),t(c,{cols:"12",md:"6"},{default:e(()=>[t(m,{size:"sm"},{append:e(()=>[n.$can("write","negocio categor\xEDas")?(f(),C(i,{key:0,to:{name:"negocio.categorias.create"},variant:"primary",title:"Crear Categor\xEDa",class:"d-flex align-items-center"},{default:e(()=>[t(s,{icon:"PlusIcon",size:"16"}),I(" Crear ")]),_:1},8,["to"])):B("",!0)]),default:e(()=>[t(h,{modelValue:a.searchQuery,"onUpdate:modelValue":l[1]||(l[1]=o=>a.searchQuery=o),type:"search",placeholder:"Buscar"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(c,{cols:"12"},{default:e(()=>[t(u,{ref:"refTable",fields:a.tableColumns,items:a.fetchData,"sort-by":a.sortBy,"sort-desc":a.isSortDirDesc,"primary-key":"id",hover:"",bordered:"",small:"",striped:"","show-empty":"","empty-text":"Sin Data",responsive:""},{"cell(id)":e(({item:o,toggleDetails:x,detailsShowing:O})=>[t(i,{variant:"primary",onClick:x,class:"mx-auto text-nowrap"},{default:e(()=>[w("span",{class:M(["mr-1 fas",O?"fa-angle-up":"fa-angle-down"])},null,2),I(" "+D(o.id),1)]),_:2},1032,["onClick"])]),"row-details":e(({item:o})=>[w("ul",null,[R,w("p",null,D(o.descripcion),1)])]),"cell(categoria)":e(({item:o})=>[n.$can("update","nagocio categor\xEDas")?(f(),C(k,{key:0,to:{name:"negocio.categorias.edit",params:{id:o.id}}},{default:e(()=>[I(D(o.categoria),1)]),_:2},1032,["to"])):(f(),S("strong",{key:1,class:"text-primary",textContent:D(o.categoria)},null,8,U))]),"cell(actions)":e(({item:o})=>[t(p,{size:"sm"},{default:e(()=>[n.$can("update","negocio categor\xEDas")?(f(),C(i,{key:0,to:{name:"negocio.categorias.edit",params:{id:o.id}},variant:"primary"},{default:e(()=>[t(s,{icon:"EditIcon"})]),_:2},1032,["to"])):B("",!0),t(i,{onClick:x=>a.mostrarImagen(o.imagen),variant:"info"},{default:e(()=>[t(s,{icon:"EyeIcon"})]),_:2},1032,["onClick"]),n.$can("delete","negocio categor\xEDas")?(f(),C(i,{key:1,onClick:x=>a.eliminar(o.id),variant:"danger"},{default:e(()=>[t(s,{icon:"TrashIcon"})]),_:2},1032,["onClick"])):B("",!0)]),_:2},1024)]),_:1},8,["fields","items","sort-by","sort-desc"])]),_:1})]),_:1}),t(_,{class:"mt-1"},{default:e(()=>[t(c,{cols:"12"},{default:e(()=>[t(v,{dataMeta:a.dataMeta,perPage:a.perPage,currentPage:a.currentPage,total:a.total},null,8,["dataMeta","perPage","currentPage","total"])]),_:1})]),_:1})]),_:1})]),_:1})}const J=N(q,[["render",F]]);export{J as default};
