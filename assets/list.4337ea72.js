import{M as T,_ as V,r as o,o as h,v as D,w as a,a as t,m as k,O as q,q as O}from"./index.453ae20a.js";import{u as S}from"./faq.3afc57a9.js";import{u as B}from"./useFilterTable.ec3a11ae.js";function w(){const l=S(),s=[{key:"id",sortable:!0,label:"#"},{key:"pregunta",sortable:!0,label:"pregunta"},{key:"categoria_id",sortable:!0,label:"Categor\xEDa"},{key:"usuario_id",sortable:!0,label:"Creador"},{key:"actions",sortable:!1}],{perPageOptions:g,currentPage:e,perPage:p,searchQuery:m,sortBy:u,isSortDirDesc:n,refTable:f,total:c,dataMeta:i,refetchData:d}=B();return{perPageOptions:g,currentPage:e,perPage:p,searchQuery:m,sortBy:u,isSortDirDesc:n,refTable:f,total:c,dataMeta:i,refetchData:d,tableColumns:s,fetchData:(y,b)=>{l.fetchFaqs({perPage:p.value,currentPage:e.value,q:m.value,sortBy:u.value,sortDirDesc:n.value}).then(({total:P,faqs:v})=>{c.value=P,b(v)}).catch(P=>{toast.error("NO se pudo cargar la data")})},eliminar:y=>{l.eliminarFaq(y).then(({result:b})=>{b?(toast.success("Se ha eliminado con \xE9xito la pregunta"),d()):toast.error("No se pudo, eliminar la pregunta, int\xE9ntelo de nuevo mas tarde..")})}}}const x={components:{PerPage:()=>V(()=>import("./PerPage.abc9d7c8.js"),["assets/PerPage.abc9d7c8.js","assets/index.453ae20a.js","assets/index.bb674c68.css"]),PaginateTable:()=>V(()=>import("./PaginateTable.4adaff48.js"),["assets/PaginateTable.4adaff48.js","assets/index.453ae20a.js","assets/index.bb674c68.css"])},setup(){const{perPageOptions:l,currentPage:s,perPage:g,searchQuery:e,sortBy:p,isSortDirDesc:m,refTable:u,total:n,dataMeta:f,refetchData:c,tableColumns:i,fetchData:d,eliminar:_}=w();return{perPageOptions:l,currentPage:s,perPage:g,searchQuery:e,sortBy:p,isSortDirDesc:m,refTable:u,total:n,dataMeta:f,refetchData:c,tableColumns:i,fetchData:d,eliminar:_}}};function E(l,s,g,e,p,m){const u=o("per-page"),n=o("b-col"),f=o("b-form-input"),c=o("feather-icon"),i=o("b-button"),d=o("b-input-group"),_=o("b-row"),C=o("b-button-group"),y=o("b-table"),b=o("paginate-table"),P=o("b-container"),v=o("b-card");return h(),D(v,null,{default:a(()=>[t(P,{fluid:""},{default:a(()=>[t(_,{class:"mb-1"},{default:a(()=>[t(n,{cols:"12",md:"6"},{default:a(()=>[t(u,{modelValue:e.perPage,"onUpdate:modelValue":s[0]||(s[0]=r=>e.perPage=r),perPageOptions:e.perPageOptions},null,8,["modelValue","perPageOptions"])]),_:1}),t(n,{cols:"12",md:"6"},{default:a(()=>[t(d,{size:"sm"},{append:a(()=>[l.$can("write","faqs")?(h(),D(i,{key:0,to:{name:"create.faq"},variant:"primary",title:"Crear Faq",class:"d-flex align-items-center"},{default:a(()=>[t(c,{icon:"EditIcon",size:"16"}),k(" Crear ")]),_:1},8,["to"])):q("",!0)]),default:a(()=>[t(f,{modelValue:e.searchQuery,"onUpdate:modelValue":s[1]||(s[1]=r=>e.searchQuery=r),type:"search",placeholder:"Buscar"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(_,null,{default:a(()=>[t(n,{cols:"12"},{default:a(()=>[t(y,{ref:"refTable",fields:e.tableColumns,items:e.fetchData,"sort-by":e.sortBy,"sort-desc":e.isSortDirDesc,"primary-key":"id",hover:"",bordered:"",small:"",striped:"","show-empty":"","empty-text":"Sin Data"},{"cell(categoria_id)":a(({item:r})=>[k(O(r.categoria.nombre),1)]),"cell(usuario_id)":a(({item:r})=>[k(O(r.usuario.nombre||"Sin definir"),1)]),"cell(actions)":a(({item:r})=>[t(C,{size:"sm"},{default:a(()=>[l.$can("update","faqs")?(h(),D(i,{key:0,to:{name:"edit.faq",params:{id:r.id}},variant:"primary"},{default:a(()=>[t(c,{icon:"EditIcon"})]),_:2},1032,["to"])):q("",!0),l.$can("delete","faqs")?(h(),D(i,{key:1,onClick:F=>e.eliminar(r.id),variant:"danger"},{default:a(()=>[t(c,{icon:"TrashIcon"})]),_:2},1032,["onClick"])):q("",!0)]),_:2},1024)]),_:1},8,["fields","items","sort-by","sort-desc"])]),_:1})]),_:1}),t(_,{class:"mt-1"},{default:a(()=>[t(n,{cols:"12"},{default:a(()=>[t(b,{dataMeta:e.dataMeta,perPage:e.perPage,currentPage:e.currentPage,total:e.total},null,8,["dataMeta","perPage","currentPage","total"])]),_:1})]),_:1})]),_:1})]),_:1})}const Q=T(x,[["render",E]]);export{Q as default};
