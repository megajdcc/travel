import{d as g,B as l,h as y,E as I}from"./index.757ffe30.js";import{T as D}from"./ToastificationContent.bac8106d.js";import{u as T}from"./useFilterTable.1019926e.js";function A(){const f=g(),a=l(null),v=[{key:"usuario",sortable:!0,label:"Usuario"},{key:"email",sortable:!0,label:"Email"},{key:"rol",sortable:!0,label:"rol"},{key:"telefono",sortable:!0,label:"Telefono"},{key:"actions",sortable:!1}],s=l(0),{perPageOptions:d,currentPage:r,perPage:t,searchQuery:o,sortBy:u,isSortDirDesc:i}=T(),n=l(null),m=y(()=>{const e=a.value?a.value.localItems.length:0;return{from:t.value*(r.value-1)+(e?1:0),to:t.value*(r.value-1)+e,of:s.value}}),c=()=>{a.value.refresh()};return I([r,t,o,n],()=>{c()}),{fetchUsers:(e,p)=>{f.fetchUsers({q:o.value,perPage:t.value,page:r.value,sortBy:u.value,sortDesc:i.value,role:n.value}).then(b=>{const{users:h,total:U}=b.data;p(h),s.value=U}).catch(()=>{toast({component:D,props:{title:"Error trayendo usuarios",icon:"AlertTriangleIcon",variant:"danger"}})})},tableColumns:v,perPage:t,currentPage:r,totalUsers:s,dataMeta:m,perPageOptions:d,searchQuery:o,sortBy:u,isSortDirDesc:i,refUserListTable:a,resolveUserRoleIcon:e=>e==="Administrador"?"user-tie":e==="Super administrador"?"user-secret":e==="Desarrollador"?"user-tie-hair":(e==="Invitado","user"),resolveUserRoleVariant:e=>e==="Administrador"?"primary":e==="Super administrador"||e==="Desarrollador"?"warning":e==="Invitado"?"success":e==="Coordinador"?"danger":"primary",refetchData:c,roleFilter:n}}export{A as u};
