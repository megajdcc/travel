import{u as te,d as ae,e as se,_ as S,f as ne,g as le,h as r,t as ie,i as re,j as ue,r as a,k as C,o as P,c as ce,b as u,a as o,w as t,l as e,m,n as g,p as v,q as me,s as de,v as pe}from"./index.52d87dda.js";import{u as _e}from"./vee-validate.esm.76ebddbf.js";import{u as be}from"./forms.48364b71.js";import{T}from"./ToastificationContent.73a4c2c7.js";/* empty css                                                                              */const fe=d=>d==="Desarrollador"?{name:"home"}:d==="Administrador"?{name:"home"}:{name:"inicio"};const ge={class:"auth-wrapper auth-v1 px-2"},ve={class:"auth-inner py-1"},he=["src"],we={class:"d-flex justify-content-between"},ke=u("label",{for:"password",class:"mb-0"},"Password",-1),xe=u("small",null,"Olvidaste la contrase\xF1a?",-1),Te={__name:"login",setup(d){const h=te(),I=ae(),w=se(),R=S(()=>import("./login-v2.865d02e5.js"),[],import.meta.url),A=ne(),{login:D,esquema:E,csrf:z}=le(),{errors:n,meta:B,handleSubmit:U,useFieldModel:j}=_e({initialValues:{email:"",password:"",remember:!1},validationSchema:E}),[p,_,b]=j(["email","password","remember"]);r(()=>h.layout.skin==="dark"?S(()=>import("./login-v2-dark.d199c21e.js"),[],import.meta.url):R);const c=r(()=>I.usuario),{skin:F}=ie(h.layout),{logotipo:L,logotipobg:N}=re(),{passwordFieldType:M,togglePasswordVisibility:k,passwordToggleIcon:O}=be(),q=U((x,s)=>{D(x,s).then(l=>{l?A.replace(fe(c.value.rol.nombre)).then(()=>{toast({component:T,props:{title:`Bienvenido ${c.value.nombre||c.value.apellido}`,icon:"mug-hot",variant:"success",text:`Ha iniciado sesi\xF3n correctamente como ${c.value.rol.nombre}. \xA1Ahora puedes empezar a explorar!`}},{position:"bottom-right",timeout:4e3})}):toast({component:T,props:{title:"No pudimos autenticarte, int\xE9ntelo de nuevo",icon:"info",variant:"danger"}},{position:"bottom-right",timeout:4e3})}).catch(l=>console.log(l))});ue(()=>z());const H=r(()=>w.loading);r(()=>w.auth);const $=r(()=>F.value=="semi-dark"?N.value:L.value);return(x,s)=>{const l=a("b-link"),G=a("b-card-text"),V=a("b-form-input"),f=a("b-form-group"),y=a("font-awesome"),J=a("b-input-group-append"),K=a("b-input-group"),Q=a("b-form-checkbox"),W=a("b-form-invalid-feedback"),X=a("b-button"),Y=a("b-form"),Z=a("b-card"),ee=C("loading"),oe=C("ripple");return P(),ce("div",ge,[u("div",ve,[o(Z,{style:{"z-index":"100"}},{default:t(()=>[o(l,{class:"brand-logo",to:{name:"inicio"}},{default:t(()=>[u("img",{src:e($),alt:"Villamizar jaraba",style:{"max-width":"220px !important",height:"auto !important"}},null,8,he)]),_:1}),o(G,{class:"text-center fw-bold"},{default:t(()=>[m(" Inicia sesi\xF3n en tu cuenta y comienza la aventura \u{1F44B} ")]),_:1}),o(Y,{class:"auth-login-form",onSubmit:g(e(q),["prevent"])},{default:t(()=>[o(f,{"label-for":"email",label:"Email","invalid-feedback":e(n).email,"label-class":"mb-0"},{default:t(()=>[o(V,{id:"email",modelValue:e(p),"onUpdate:modelValue":s[0]||(s[0]=i=>v(p)?p.value=i:null),name:"login-email",placeholder:"john@example.com",autofocus:"",state:!e(n).email},null,8,["modelValue","state"])]),_:1},8,["invalid-feedback"]),o(f,{"invalid-feedback":e(n).passowrd,label:"Password","label-for":"password","labal-class":"mb-0"},{label:t(()=>[u("div",we,[ke,o(l,{to:{name:"auth-forgot-password"}},{default:t(()=>[xe]),_:1})])]),default:t(()=>[o(K,null,{default:t(()=>[o(V,{id:"password",modelValue:e(_),"onUpdate:modelValue":s[1]||(s[1]=i=>v(_)?_.value=i:null),type:e(M),name:"login-password",placeholder:"Password",state:e(n).password?!1:null},null,8,["modelValue","type","state"]),o(J,{"is-text":"",onClick:g(e(k),["stop"]),class:"cursor-pointer"},{default:t(()=>[o(y,{icon:e(O),class:"cursor-pointer",onClick:g(e(k),["stop"])},null,8,["icon","onClick"])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["invalid-feedback"]),o(f,null,{default:t(()=>[o(Q,{id:"remember-me",modelValue:e(b),"onUpdate:modelValue":s[2]||(s[2]=i=>v(b)?b.value=i:null),name:"checkbox-1",state:e(n).remember?!1:null},{default:t(()=>[m(" Recordarme ")]),_:1},8,["modelValue","state"]),o(W,{state:!e(n).remember},{default:t(()=>[m(me(e(n).remember),1)]),_:1},8,["state"])]),_:1}),de((P(),pe(X,{variant:"primary",type:"submit",block:"",disabled:!e(B).valid,class:"w-100"},{default:t(()=>[o(y,{icon:"paper-plane",size:"xl"}),m(" Iniciar ")]),_:1},8,["disabled"])),[[ee,e(H)],[oe,50]])]),_:1},8,["onSubmit"])]),_:1})])])}}};export{Te as default};
