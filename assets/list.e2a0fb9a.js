import{M as T,_ as V,r as o,o as h,v as D,w as a,a as t,m as q,O as C,q as O}from"./index.52d87dda.js";import{u as B}from"./faq.bc1d40d6.js";import{u as S}from"./useFilterTable.34a2cd4b.js";function w(){const s=B(),c=[{key:"id",sortable:!0,label:"#"},{key:"nombre",sortable:!0,label:"Categor\xEDa"},{key:"faqs",sortable:!0,label:"Preguntas con esta categor\xEDa"},{key:"actions",sortable:!1}],{perPageOptions:g,currentPage:e,perPage:_,searchQuery:p,sortBy:u,isSortDirDesc:n,refTable:f,total:l,dataMeta:i,refetchData:d}=S();return{perPageOptions:g,currentPage:e,perPage:_,searchQuery:p,sortBy:u,isSortDirDesc:n,refTable:f,total:l,dataMeta:i,refetchData:d,tableColumns:c,fetchData:(P,b)=>{s.fetchCategorias({perPage:_.value,currentPage:e.value,q:p.value,sortBy:u.value,sortDirDesc:n.value}).then(({total:y,categorias:v})=>{l.value=y,b(v)}).catch(y=>{toast.error("NO se pudo cargar la data")})},eliminar:P=>{s.eliminarCategoria(P).then(({result:b})=>{b?(toast.success("Se ha eliminado con \xE9xito la categor\xEDa"),d()):toast.error("No se pudo, eliminar la categor\xEDa, int\xE9ntelo de nuevo mas tarde..")})}}}const x={components:{PerPage:()=>V(()=>import("./PerPage.db17fdea.js"),["PerPage.db17fdea.js","index.52d87dda.js","index.e7c36ab6.css"],import.meta.url),PaginateTable:()=>V(()=>import("./PaginateTable.50636861.js"),["PaginateTable.50636861.js","index.52d87dda.js","index.e7c36ab6.css"],import.meta.url)},setup(){const{perPageOptions:s,currentPage:c,perPage:g,searchQuery:e,sortBy:_,isSortDirDesc:p,refTable:u,total:n,dataMeta:f,refetchData:l,tableColumns:i,fetchData:d,eliminar:m}=w();return{perPageOptions:s,currentPage:c,perPage:g,searchQuery:e,sortBy:_,isSortDirDesc:p,refTable:u,total:n,dataMeta:f,refetchData:l,tableColumns:i,fetchData:d,eliminar:m}}};function E(s,c,g,e,_,p){const u=o("per-page"),n=o("b-col"),f=o("b-form-input"),l=o("feather-icon"),i=o("b-button"),d=o("b-input-group"),m=o("b-row"),k=o("b-button-group"),P=o("b-table"),b=o("paginate-table"),y=o("b-container"),v=o("b-card");return h(),D(v,null,{default:a(()=>[t(y,{fluid:""},{default:a(()=>[t(m,{class:"mb-1"},{default:a(()=>[t(n,{cols:"12",md:"6"},{default:a(()=>[t(u,{modelValue:e.perPage,"onUpdate:modelValue":c[0]||(c[0]=r=>e.perPage=r),perPageOptions:e.perPageOptions},null,8,["modelValue","perPageOptions"])]),_:1}),t(n,{cols:"12",md:"6"},{default:a(()=>[t(d,{size:"sm"},{append:a(()=>[s.$can("write","faqs")?(h(),D(i,{key:0,to:{name:"create.categoria-faq"},variant:"primary",title:"Crear Faq",class:"d-flex align-items-center"},{default:a(()=>[t(l,{icon:"EditIcon",size:"16"}),q(" Crear ")]),_:1},8,["to"])):C("",!0)]),default:a(()=>[t(f,{modelValue:e.searchQuery,"onUpdate:modelValue":c[1]||(c[1]=r=>e.searchQuery=r),type:"search",placeholder:"Buscar"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(m,null,{default:a(()=>[t(n,{cols:"12"},{default:a(()=>[t(P,{ref:"refTable",fields:e.tableColumns,items:e.fetchData,"sort-by":e.sortBy,"sort-desc":e.isSortDirDesc,"primary-key":"id",hover:"",bordered:"",small:"",striped:"","show-empty":"","empty-text":"Sin Data"},{"cell(nombre)":a(({item:r})=>[t(l,{icon:r.icono},null,8,["icon"]),q(" - "+O(r.nombre),1)]),"cell(faqs)":a(({item:r})=>[q(O(r.faqs.length),1)]),"cell(actions)":a(({item:r})=>[t(k,{size:"sm"},{default:a(()=>[s.$can("update","faqs")?(h(),D(i,{key:0,to:{name:"edit.categoria-faq",params:{id:r.id}},variant:"primary"},{default:a(()=>[t(l,{icon:"EditIcon"})]),_:2},1032,["to"])):C("",!0),s.$can("delete","faqs")?(h(),D(i,{key:1,onClick:M=>e.eliminar(r.id),variant:"danger"},{default:a(()=>[t(l,{icon:"TrashIcon"})]),_:2},1032,["onClick"])):C("",!0)]),_:2},1024)]),_:1},8,["fields","items","sort-by","sort-desc"])]),_:1})]),_:1}),t(m,{class:"mt-1"},{default:a(()=>[t(n,{cols:"12"},{default:a(()=>[t(b,{dataMeta:e.dataMeta,perPage:e.perPage,currentPage:e.currentPage,total:e.total},null,8,["dataMeta","perPage","currentPage","total"])]),_:1})]),_:1})]),_:1})]),_:1})}const Q=T(x,[["render",E]]);export{Q as default};
