import{M as V,_ as D,e as C,j as T,ah as E,h as B,r as a,o as M,v as O,w as o,a as t,b as y,m as R}from"./index.52d87dda.js";import{u as S}from"./useFilterTable.34a2cd4b.js";import{u as N}from"./rol.610197c6.js";function w(){const h=N(),r=[{key:"id",sortable:!0,label:"#"},{key:"nombre",sortable:!0,label:"Rol"},{key:"actions",sortKey:"id",sortable:!0}],{perPageOptions:P,currentPage:e,perPage:u,searchQuery:p,sortBy:d,isSortDirDesc:n,refTable:b,total:s,dataMeta:l,refetchData:c}=S();return{perPageOptions:P,currentPage:e,perPage:u,searchQuery:p,sortBy:d,isSortDirDesc:n,refTable:b,total:s,dataMeta:l,refetchData:c,fetchData:(_,i)=>{h.fetchData({perPage:u.value,sortBy:d.value,isSortDirDesc:n.value,q:p.value,page:e.value}).then(g=>{s.value=Number(g.total),i(g.roles)}).catch(g=>{toast.error("Error trayendo data ")})},tableColumns:r,eliminarRol:_=>{h.eliminarRol(_).then(({result:i})=>{i?(toast.success("Rol Eliminado con \xE9xito."),c()):toast.error("Rol no se pudo eliminar, int\xE9ntelo de nuevo mas tarde")}).catch(i=>{console.log(i)})}}}const z={components:{PerPage:()=>D(()=>import("./PerPage.db17fdea.js"),["PerPage.db17fdea.js","index.52d87dda.js","index.e7c36ab6.css"],import.meta.url),PaginateTable:()=>D(()=>import("./PaginateTable.50636861.js"),["PaginateTable.50636861.js","index.52d87dda.js","index.e7c36ab6.css"],import.meta.url)},setup(h){const r=C(),{perPageOptions:P,currentPage:e,perPage:u,searchQuery:p,sortBy:d,isSortDirDesc:n,refTable:b,total:s,dataMeta:l,refetchData:c,fetchData:f,tableColumns:v,eliminarRol:_}=w();return T(()=>{setTimeout(()=>{c()},1e3)}),{perPageOptions:P,currentPage:e,perPage:u,searchQuery:p,sortBy:d,isSortDirDesc:n,refTable:b,total:s,dataMeta:l,refetchData:c,fetchData:f,tableColumns:v,eliminarRol:_,regresar:E,loading:B(()=>r.loading)}}},Q={class:"m-2"},j={class:"d-flex align-items-center justify-content-end"},A=y("span",{class:"text-nowrap text-center d-block"}," No se encontr\xF3 n\xEDng\xFAn usuario... ",-1),I={class:"text-center my-2"},q=y("strong",null,"Cargando...",-1);function L(h,r,P,e,u,p){const d=a("per-page"),n=a("b-col"),b=a("b-form-input"),s=a("feather-icon"),l=a("b-button"),c=a("b-input-group"),f=a("b-row"),v=a("b-spinner"),_=a("b-button-group"),i=a("b-table"),g=a("paginate-table"),x=a("b-container"),k=a("b-card");return M(),O(x,{fluid:"",class:"px-0 mx-0"},{default:o(()=>[t(k,{"no-body":"",class:"mb-0"},{default:o(()=>[y("div",Q,[t(f,null,{default:o(()=>[t(n,{cols:"12",md:"6",class:"d-flex align-items-center justify-content-start mb-1 mb-md-0"},{default:o(()=>[t(d,{modelValue:e.perPage,"onUpdate:modelValue":r[0]||(r[0]=m=>e.perPage=m),perPageOptions:e.perPageOptions},null,8,["modelValue","perPageOptions"])]),_:1}),t(n,{md:"6"},{default:o(()=>[y("div",j,[t(c,{size:"sm"},{append:o(()=>[t(l,{variant:"dark",to:{name:"create.role"}},{default:o(()=>[t(s,{size:"18",icon:"PlusSquareIcon"}),R(" A\xF1adir ")]),_:1},8,["to"])]),default:o(()=>[t(b,{modelValue:e.searchQuery,"onUpdate:modelValue":r[1]||(r[1]=m=>e.searchQuery=m),type:"search",placeholder:"..."},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1})]),t(i,{ref:"refTable",items:e.fetchData,responsive:"",fields:e.tableColumns,"primary-key":"id","sort-by":e.sortBy,"empty-text":"No se encontr\xF3 ning\xFAn Rol","sort-desc":e.isSortDirDesc,"sticky-header":"700px","no-border-collapse":!1,borderless:"",outlined:"",small:"",busy:e.loading},{empty:o(()=>[A]),"table-busy":o(()=>[y("div",I,[t(v,{class:"align-middle",variant:"primary"}),q])]),"cell(actions)":o(({item:m})=>[t(_,{size:"sm"},{default:o(()=>[t(l,{to:{name:"edit.role",params:{id:m.id}},variant:"primary",title:"Editar Rol"},{default:o(()=>[t(s,{icon:"edit"})]),_:2},1032,["to"]),t(l,{onClick:U=>e.eliminarRol(m.id),variant:"danger",title:"Eliminar Rol"},{default:o(()=>[t(s,{icon:"trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["items","fields","sort-by","sort-desc","busy"]),t(g,{dataMeta:e.dataMeta,currentPage:e.currentPage,perPage:e.perPage,total:e.total},null,8,["dataMeta","currentPage","perPage","total"]),t(x,{class:"mb-1"},{default:o(()=>[t(f,null,{default:o(()=>[t(n,{class:"px-1"},{default:o(()=>[t(l,{onClick:e.regresar,size:"sm"},{default:o(()=>[R("Regresar")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const H=V(z,[["render",L]]);export{H as default};
