import{B as U,D as M,a6 as P,d as T,h as S,j as Y,E as j,af as G,ag as q,ah as J,M as H,r as a,o as h,v as k,w as o,a as e,b as m,q as K,m as F,O as E,n as Q}from"./index.48deae7d.js";import{u as W}from"./rol.11a007b1.js";import{C as X}from"./component.cc197936.js";import{u as Z}from"./useUsersList.b15a26a0.js";const $=(i,t)=>({inputImageRenderer:()=>{const l=i.value.files[0],u=new FileReader;u.addEventListener("load",()=>{t(u.result)},!1),l&&u.readAsDataURL(l)}});function ee(i,t=()=>{}){const c=U(null),l=()=>{c.value.reset()};return{refFormObserver:c,resetObserver:l,getValidationState:({dirty:v,validated:V,required:_,changed:r,valid:s=null})=>!_&&!r?null:v||V?s:null,resetForm:()=>{i(),M(()=>{l()})},clearForm:()=>{t(),M(()=>{l()})}}}const oe={components:{vSelect:P,flatPickr:X},directives:{Ripple},setup(i,{emit:t}){const c=W(),l=T(),{resolveUserRoleVariant:u}=Z(),w=S(()=>c.getRols),{refFormObserver:f,getValidationState:v,resetForm:V}=ee(p),_=U(null),r=S(()=>l.draft),s=()=>{w.value.length||c.cargarRoles()};Y(()=>{s()}),j([r],()=>{s()});const p=()=>l.clearUsuario(),C=()=>{t("save",r.value,f.value)},y=[{text:"Si",value:!0},{text:"No",value:!1}],x=U(null),R=U(null),{inputImageRenderer:b}=$(x,R),d=N=>{let I=new FormData;I.append("filepond",_.value),l.updateAvatarUser(I).then(({data:g})=>{l.actualizarAvatarDeUsuario(g)}).catch(g=>console.log(g))};return{refFormObserver:f,getValidationState:v,resetForm:V,guardar:C,form:r,cargarform:s,whatsappOptions:y,avatarText:G,title:q,inputImageRenderer:b,refInputEl:x,previewEl:R,resolveUserRoleVariant:u,regresar:J,profileFile:_,loading:S(()=>root.loading),getRols:w,cargarImagen:d}}},le=m("span",{class:"d-none d-sm-inline"},"Cuenta",-1),te=["textContent"],ae=m("span",{class:"d-none d-sm-inline"},"Informaci\xF3n",-1),ne={class:"d-flex"},re=m("h4",{class:"mb-0 ms-1"}," Informaci\xF3n Personal ",-1),se={class:"d-flex mt-2"},de=m("h4",{class:"mb-0 ms-1"}," Direcci\xF3n ",-1),ie={class:"d-flex mt-2"};function me(i,t,c,l,u,w){const f=a("font-awesome"),v=a("b-img"),V=a("b-link"),_=a("b-media-aside"),r=a("b-col"),s=a("b-row"),p=a("b-button"),C=a("b-form-file"),y=a("b-card-text"),x=a("b-media-body"),R=a("b-media"),b=a("b-form-input"),d=a("b-form-group"),N=a("v-select"),I=a("b-form"),g=a("b-tab"),D=a("feather-icon"),z=a("flat-pickr"),A=a("b-form-textarea"),B=a("b-tabs"),L=a("b-button-group"),O=a("b-card");return h(),k(O,null,{default:o(()=>[e(I,{class:"p-2 w-100",onReset:Q(l.resetForm,["prevent"])},{default:o(()=>[e(s,{class:"w-100"},{default:o(()=>[e(r,null,{default:o(()=>[l.form?(h(),k(B,{key:0,pills:""},{default:o(()=>[e(g,{active:""},{title:o(()=>[e(f,{icon:"user",class:"me-1 mr-sm-1"}),le]),default:o(()=>[l.form.id?(h(),k(R,{key:0,"no-body":""},{default:o(()=>[e(_,null,{default:o(()=>[e(V,null,{default:o(()=>[e(v,{ref:"previewEl",rounded:"",src:l.form.avatar,height:"80"},null,8,["src"])]),_:1})]),_:1}),e(x,{class:"mt-75 ms-1"},{default:o(()=>[e(s,null,{default:o(()=>[e(r,null,{default:o(()=>[m("h4",{class:"mb-1",textContent:K(l.title(`${l.form.nombre} ${l.form.apellido}`))},null,8,te)]),_:1})]),_:1}),e(s,null,{default:o(()=>[e(p,{class:"mb-75 me-1",onClick:t[0]||(t[0]=n=>i.$refs.refInputEl.$el.click())},{default:o(()=>[F(" Actualizar ")]),_:1}),e(C,{ref:"refInputEl",modelValue:l.profileFile,"onUpdate:modelValue":t[1]||(t[1]=n=>l.profileFile=n),accept:".jpg, .png, .gif, .jpeg",hidden:!0,plain:"",onInput:l.cargarImagen},null,8,["modelValue","onInput"]),e(y,null,{default:o(()=>[F("Solo se permiten imagen del tipo JPG, GIF o PNG. Max tama\xF1o de 800kB ")]),_:1})]),_:1})]),_:1})]),_:1})):E("",!0),e(I,null,{default:o(()=>[e(s,{class:"mt-1"},{default:o(()=>[e(r,{cols:"12",md:"4"},{default:o(()=>[e(d,{label:"Nombre","label-for":"nombre"},{default:o(()=>[e(b,{id:"nombre",modelValue:l.form.nombre,"onUpdate:modelValue":t[2]||(t[2]=n=>l.form.nombre=n),autofocus:"",trim:"",placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{cols:"12",md:"4"},{default:o(()=>[e(d,{label:"Apellido","label-for":"apellido"},{default:o(()=>[e(b,{id:"apellido",modelValue:l.form.apellido,"onUpdate:modelValue":t[3]||(t[3]=n=>l.form.apellido=n),autofocus:"",trim:"",placeholder:"Crespo"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{cols:"12",md:"4"},{default:o(()=>[e(d,{label:"Email","label-for":"email"},{default:o(()=>[e(b,{id:"email",modelValue:l.form.email,"onUpdate:modelValue":t[4]||(t[4]=n=>l.form.email=n),trim:""},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{cols:"12",md:"4"},{default:o(()=>[e(d,{label:"Rol de usuario","label-for":"user-role",state:i.errors.length?!1:null},{default:o(()=>[e(N,{modelValue:l.form.rol_id,"onUpdate:modelValue":t[5]||(t[5]=n=>l.form.rol_id=n),dir:i.$store.state.appConfig.isRTL?"rtl":"ltr",options:l.getRols,reduce:n=>n.value,clearable:!1,"input-id":"user-role"},null,8,["modelValue","dir","options","reduce"])]),_:1},8,["state"])]),_:1})]),_:1})]),_:1})]),_:1}),e(g,null,{title:o(()=>[e(D,{icon:"InfoIcon",size:"16",class:"me-1 mr-sm-50"}),ae]),default:o(()=>[m("div",ne,[e(f,{icon:"user"}),re]),e(s,null,{default:o(()=>[e(r,{cols:"12",md:"6",lg:"4"},{default:o(()=>[e(d,{label:"Fecha Nacimiento","label-for":"birth-date"},{default:o(()=>[e(z,{modelValue:l.form.fecha_nacimiento,"onUpdate:modelValue":t[6]||(t[6]=n=>l.form.fecha_nacimiento=n),class:"form-control",config:{dateFormat:"Y-m-d"},placeholder:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{cols:"12",md:"6",lg:"4"},{default:o(()=>[e(d,{label:"Telefono","label-for":"telefono"},{default:o(()=>[e(b,{id:"telefono",modelValue:l.form.telefono,"onUpdate:modelValue":t[7]||(t[7]=n=>l.form.telefono=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),m("div",se,[e(D,{icon:"MapPinIcon",size:"19"}),de]),e(s,{class:"mt-1"},{default:o(()=>[e(r,{cols:"12"},{default:o(()=>[e(d,{label:"Direcci\xF3n","label-for":"direccion"},{default:o(()=>[e(A,{id:"direccion",modelValue:l.form.direccion,"onUpdate:modelValue":t[8]||(t[8]=n=>l.form.direccion=n),placeholder:"Ingrese la direcci\xF3n",rows:"2","max-rows":"6"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):E("",!0)]),_:1})]),_:1}),e(s,null,{default:o(()=>[e(r,null,{default:o(()=>[m("div",ie,[e(L,{size:"sm"},{default:o(()=>[e(p,{onClick:l.regresar,title:"regresar"},{default:o(()=>[e(D,{icon:"arrow-left"}),F(" Regresar ")]),_:1},8,["onClick"]),l.form.id?E("",!0):(h(),k(p,{key:0,type:"reset",variant:"outline-secondary"},{default:o(()=>[F(" Limpiar ")]),_:1}))]),_:1})])]),_:1})]),_:1})]),_:1},8,["onReset"])]),_:1})}const pe=H(oe,[["render",me]]);export{pe as f};
