import{M as V,_ as D,e as E,ah as C,h as T,r as a,o as B,v as O,w as o,a as t,b as g,m as S}from"./index.757ffe30.js";import{u as M}from"./useFilterTable.1019926e.js";import{u as N}from"./permiso.d8f62dff.js";function w(){const P=N(),r=[{key:"id",sortable:!0,label:"#"},{key:"nombre",sortable:!0,label:"Rol"},{key:"actions",sortKey:"id",sortable:!0}],{perPageOptions:y,currentPage:e,perPage:p,searchQuery:u,sortBy:c,isSortDirDesc:s,refTable:b,total:n,dataMeta:i,refetchData:m}=M();return{perPageOptions:y,currentPage:e,perPage:p,searchQuery:u,sortBy:c,isSortDirDesc:s,refTable:b,total:n,dataMeta:i,refetchData:m,fetchData:(d,l)=>{P.fetchData({perPage:p.value,sortBy:c.value,isSortDirDesc:s.value,q:u.value,page:e.value}).then(f=>{l(f.permisos),n.value=Number(f.total)}).catch(f=>{toast.error("Error trayendo data ")})},tableColumns:r,eliminarPermiso:d=>{P.eliminarPermiso(d).then(({result:l})=>{l?(toast.success("Permiso Eliminado con \xE9xito."),m()):toast.error("El Permiso no se pudo eliminar, int\xE9ntelo de nuevo mas tarde")}).catch(l=>{console.log(l)})}}}const Q={components:{PerPage:()=>D(()=>import("./PerPage.6cc37514.js"),["assets/PerPage.6cc37514.js","assets/index.757ffe30.js","assets/index.bb674c68.css"]),PaginateTable:()=>D(()=>import("./PaginateTable.c102cc01.js"),["assets/PaginateTable.c102cc01.js","assets/index.757ffe30.js","assets/index.bb674c68.css"])},setup(P){const r=E(),{perPageOptions:y,currentPage:e,perPage:p,searchQuery:u,sortBy:c,isSortDirDesc:s,refTable:b,total:n,dataMeta:i,refetchData:m,fetchData:h,tableColumns:v,eliminarPermiso:d}=w();return{perPageOptions:y,currentPage:e,perPage:p,searchQuery:u,sortBy:c,isSortDirDesc:s,refTable:b,total:n,dataMeta:i,refetchData:m,fetchData:h,tableColumns:v,eliminarPermiso:d,regresar:C,loading:T(()=>r.loading)}}},R={class:"m-2"},z={class:"d-flex align-items-center justify-content-end"},A=g("span",{class:"text-nowrap text-center d-block"}," No se encontr\xF3 n\xEDng\xFAn usuario... ",-1),I={class:"text-center my-2"},j=g("strong",null,"Cargando...",-1);function q(P,r,y,e,p,u){const c=a("per-page"),s=a("b-col"),b=a("b-form-input"),n=a("feather-icon"),i=a("b-button"),m=a("b-input-group"),h=a("b-row"),v=a("b-spinner"),d=a("b-button-group"),l=a("b-table"),f=a("paginate-table"),x=a("b-card"),k=a("b-container");return B(),O(k,{fluid:"",class:"px-0 mx-0"},{default:o(()=>[t(x,{"no-body":"",class:"mb-0"},{default:o(()=>[g("div",R,[t(h,null,{default:o(()=>[t(s,{cols:"12",md:"6",class:"d-flex align-items-center justify-content-start mb-1 mb-md-0"},{default:o(()=>[t(c,{modelValue:e.perPage,"onUpdate:modelValue":r[0]||(r[0]=_=>e.perPage=_),perPageOptions:e.perPageOptions},null,8,["modelValue","perPageOptions"])]),_:1}),t(s,{md:"6"},{default:o(()=>[g("div",z,[t(m,{size:"sm"},{append:o(()=>[t(i,{variant:"dark",to:{name:"create.permiso"}},{default:o(()=>[t(n,{size:"18",icon:"PlusSquareIcon"}),S(" A\xF1adir ")]),_:1},8,["to"])]),default:o(()=>[t(b,{modelValue:e.searchQuery,"onUpdate:modelValue":r[1]||(r[1]=_=>e.searchQuery=_),type:"search",placeholder:"..."},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1})]),t(l,{ref:"refTable",items:e.fetchData,responsive:"",fields:e.tableColumns,"primary-key":"id","sort-by":e.sortBy,"empty-text":"No se encontr\xF3 ning\xFAn Permiso","sort-desc":e.isSortDirDesc,"sticky-header":"700px","no-border-collapse":!1,borderless:"",outlined:"",small:"",busy:e.loading},{empty:o(()=>[A]),"table-busy":o(()=>[g("div",I,[t(v,{class:"align-middle",variant:"primary"}),j])]),"cell(actions)":o(({item:_})=>[t(d,{size:"sm"},{default:o(()=>[t(i,{to:{name:"edit.permiso",params:{id:_.id}},variant:"primary",title:"Editar Permiso"},{default:o(()=>[t(n,{icon:"edit"})]),_:2},1032,["to"]),t(i,{onClick:L=>e.eliminarPermiso(_.id),variant:"danger",title:"Eliminar Permiso"},{default:o(()=>[t(n,{icon:"trash"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["items","fields","sort-by","sort-desc","busy"]),t(f,{dataMeta:e.dataMeta,currentPage:e.currentPage,perPage:e.perPage,total:e.total},null,8,["dataMeta","currentPage","perPage","total"])]),_:1})]),_:1})}const G=V(Q,[["render",q]]);export{G as default};
