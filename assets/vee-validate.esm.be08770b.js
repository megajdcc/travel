import{x as we,y as te,h as N,z as Ue,A as Fe,B as Z,C as ze,l as c,D as he,p as Se,E as x,F as tn,j as rn,G as an,H as Fn,I as un,J as ln,K as Sn,L as on}from"./index.48deae7d.js";/**
  * vee-validate v4.7.0
  * (c) 2022 Abdelrahman Awad
  * @license MIT
  */function de(e){return typeof e=="function"}function ge(e){return e==null}const oe=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function sn(e){return Number(e)>=0}function En(e){const n=parseFloat(e);return isNaN(n)?e:n}const wn={};function jn(e){return wn[e]}const Oe=Symbol("vee-validate-form"),Mn=Symbol("vee-validate-field-instance"),Ee=Symbol("Default empty value"),_n=typeof window<"u";function Re(e){return de(e)&&!!e.__locatorRef}function Ve(e){return!!e&&de(e.validate)}function fe(e){return e==="checkbox"||e==="radio"}function In(e){return oe(e)||Array.isArray(e)}function cn(e){return Array.isArray(e)?e.length===0:oe(e)&&Object.keys(e).length===0}function je(e){return/^\[.+\]$/i.test(e)}function kn(e){return dn(e)&&e.multiple}function dn(e){return e.tagName==="SELECT"}function Cn(e,n){const t=![!1,null,void 0,0].includes(n.multiple)&&!Number.isNaN(n.multiple);return e==="select"&&"multiple"in n&&t}function Bn(e,n){return!Cn(e,n)&&n.type!=="file"&&!fe(n.type)}function fn(e){return De(e)&&e.target&&"submit"in e.target}function De(e){return e?!!(typeof Event<"u"&&de(Event)&&e instanceof Event||e&&e.srcElement):!1}function Ke(e,n){return n in e&&e[n]!==Ee}function H(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var t,r,a;if(Array.isArray(e)){if(t=e.length,t!=n.length)return!1;for(r=t;r--!==0;)if(!H(e[r],n[r]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(r of e.entries())if(!n.has(r[0]))return!1;for(r of e.entries())if(!H(r[1],n.get(r[0])))return!1;return!0}if(Ye(e)&&Ye(n))return!(e.size!==n.size||e.name!==n.name||e.lastModified!==n.lastModified||e.type!==n.type);if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(r of e.entries())if(!n.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(t=e.length,t!=n.length)return!1;for(r=t;r--!==0;)if(e[r]!==n[r])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(a=Object.keys(e),t=a.length,t!==Object.keys(n).length)return!1;for(r=t;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=t;r--!==0;){var i=a[r];if(!H(e[i],n[i]))return!1}return!0}return e!==e&&n!==n}function Ye(e){return _n?e instanceof File:!1}var Je=function e(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){if(n.constructor!==t.constructor)return!1;var r,a,i;if(Array.isArray(n)){if(r=n.length,r!=t.length)return!1;for(a=r;a--!==0;)if(!e(n[a],t[a]))return!1;return!0}if(n.constructor===RegExp)return n.source===t.source&&n.flags===t.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===t.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===t.toString();if(i=Object.keys(n),r=i.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[a]))return!1;for(a=r;a--!==0;){var l=i[a];if(!e(n[l],t[l]))return!1}return!0}return n!==n&&t!==t};function $e(e){return je(e)?e.replace(/\[|\]/gi,""):e}function C(e,n,t){return e?je(n)?e[$e(n)]:(n||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((a,i)=>In(a)&&i in a?a[i]:t,e):t}function ae(e,n,t){if(je(n)){e[$e(n)]=t;return}const r=n.split(/\.|\[(\d+)\]/).filter(Boolean);let a=e;for(let i=0;i<r.length;i++){if(i===r.length-1){a[r[i]]=t;return}(!(r[i]in a)||ge(a[r[i]]))&&(a[r[i]]=sn(r[i+1])?[]:{}),a=a[r[i]]}}function ke(e,n){if(Array.isArray(e)&&sn(n)){e.splice(Number(n),1);return}oe(e)&&delete e[n]}function Ce(e,n){if(je(n)){delete e[$e(n)];return}const t=n.split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let i=0;i<t.length;i++){if(i===t.length-1){ke(r,t[i]);break}if(!(t[i]in r)||ge(r[t[i]]))break;r=r[t[i]]}const a=t.map((i,l)=>C(e,t.slice(0,l).join(".")));for(let i=a.length-1;i>=0;i--)if(!!cn(a[i])){if(i===0){ke(e,t[0]);continue}ke(a[i-1],t[i-1])}}function P(e){return Object.keys(e)}function Le(e,n=void 0){const t=on();return(t==null?void 0:t.provides[e])||un(e,n)}function Be(e){tn(`[vee-validate]: ${e}`)}function Te(e,n,t){if(Array.isArray(e)){const r=[...e],a=r.findIndex(i=>Je(i,n));return a>=0?r.splice(a,1):r.push(n),r}return Je(e,n)?t:n}function Xe(e,n=0){let t=null,r=[];return function(...a){return t&&window.clearTimeout(t),t=window.setTimeout(()=>{const i=e(...a);r.forEach(l=>l(i)),r=[]},n),new Promise(i=>r.push(i))}}function Nn(e,n){return oe(n)&&n.number?En(e):e}function Pe(e,n){let t;return async function(...a){const i=e(...a);t=i;const l=await i;return i!==t||(t=void 0,n(l,a)),l}}const Me=(e,n,t)=>n.slots.default?typeof e=="string"||!e?n.slots.default(t()):{default:()=>{var r,a;return(a=(r=n.slots).default)===null||a===void 0?void 0:a.call(r,t())}}:n.slots.default;function Ne(e){if(vn(e))return e._value}function vn(e){return"_value"in e}function Ge(e){if(!De(e))return e;const n=e.target;if(fe(n.type)&&vn(n))return Ne(n);if(n.type==="file"&&n.files){const t=Array.from(n.files);return n.multiple?t:t[0]}if(kn(n))return Array.from(n.options).filter(t=>t.selected&&!t.disabled).map(Ne);if(dn(n)){const t=Array.from(n.options).find(r=>r.selected);return t?Ne(t):n.value}return n.value}function mn(e){const n={};return Object.defineProperty(n,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?oe(e)&&e._$$isNormalized?e:oe(e)?Object.keys(e).reduce((t,r)=>{const a=Rn(e[r]);return e[r]!==!1&&(t[r]=Qe(a)),t},n):typeof e!="string"?n:e.split("|").reduce((t,r)=>{const a=Tn(r);return a.name&&(t[a.name]=Qe(a.params)),t},n):n}function Rn(e){return e===!0?[]:Array.isArray(e)||oe(e)?e:[e]}function Qe(e){const n=t=>typeof t=="string"&&t[0]==="@"?Pn(t.slice(1)):t;return Array.isArray(e)?e.map(n):e instanceof RegExp?[e]:Object.keys(e).reduce((t,r)=>(t[r]=n(e[r]),t),{})}const Tn=e=>{let n=[];const t=e.split(":")[0];return e.includes(":")&&(n=e.split(":").slice(1).join(":").split(",")),{name:t,params:n}};function Pn(e){const n=t=>C(t,e)||t[e];return n.__locatorRef=e,n}function Un(e){return Array.isArray(e)?e.filter(Re):P(e).filter(n=>Re(e[n])).map(n=>e[n])}const zn={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Dn=Object.assign({},zn);const qe=()=>Dn;async function yn(e,n,t={}){const r=t==null?void 0:t.bails,a={name:(t==null?void 0:t.name)||"{field}",rules:n,bails:r!=null?r:!0,formData:(t==null?void 0:t.values)||{}},l=(await $n(a,e)).errors;return{errors:l,valid:!l.length}}async function $n(e,n){if(Ve(e.rules))return Ln(n,e.rules,{bails:e.bails});if(de(e.rules)||Array.isArray(e.rules)){const l={field:e.name,form:e.formData,value:n},v=Array.isArray(e.rules)?e.rules:[e.rules],y=v.length,s=[];for(let E=0;E<y;E++){const V=v[E],F=await V(n,l);if(typeof F!="string"&&F)continue;const R=typeof F=="string"?F:hn(l);if(s.push(R),e.bails)return{errors:s}}return{errors:s}}const t=Object.assign(Object.assign({},e),{rules:mn(e.rules)}),r=[],a=Object.keys(t.rules),i=a.length;for(let l=0;l<i;l++){const v=a[l],y=await Gn(t,n,{name:v,params:t.rules[v]});if(y.error&&(r.push(y.error),e.bails))return{errors:r}}return{errors:r}}async function Ln(e,n,t){var r;return{errors:await n.validate(e,{abortEarly:(r=t.bails)!==null&&r!==void 0?r:!0}).then(()=>[]).catch(i=>{if(i.name==="ValidationError")return i.errors;throw i})}}async function Gn(e,n,t){const r=jn(t.name);if(!r)throw new Error(`No such validator '${t.name}' exists.`);const a=qn(t.params,e.formData),i={field:e.name,value:n,form:e.formData,rule:Object.assign(Object.assign({},t),{params:a})},l=await r(n,a,i);return typeof l=="string"?{error:l}:{error:l?void 0:hn(i)}}function hn(e){const n=qe().generateMessage;return n?n(e):"Field is invalid"}function qn(e,n){const t=r=>Re(r)?r(n):r;return Array.isArray(e)?e.map(t):Object.keys(e).reduce((r,a)=>(r[a]=t(e[a]),r),{})}async function Hn(e,n){const t=await e.validate(n,{abortEarly:!1}).then(()=>[]).catch(i=>{if(i.name!=="ValidationError")throw i;return i.inner||[]}),r={},a={};for(const i of t){const l=i.errors;r[i.path]={valid:!l.length,errors:l},l.length&&(a[i.path]=l[0])}return{valid:!t.length,results:r,errors:a}}async function Wn(e,n,t){const a=P(e).map(async s=>{var E,V,F;const _=await yn(C(n,s),e[s],{name:((E=t==null?void 0:t.names)===null||E===void 0?void 0:E[s])||s,values:n,bails:(F=(V=t==null?void 0:t.bailsMap)===null||V===void 0?void 0:V[s])!==null&&F!==void 0?F:!0});return Object.assign(Object.assign({},_),{path:s})});let i=!0;const l=await Promise.all(a),v={},y={};for(const s of l)v[s.path]={valid:s.valid,errors:s.errors},s.valid||(i=!1,y[s.path]=s.errors[0]);return{valid:i,results:v,errors:y}}function Ze(e,n,t){typeof t.value=="object"&&(t.value=B(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||n==="__proto__"?Object.defineProperty(e,n,t):e[n]=t.value}function B(e){if(typeof e!="object")return e;var n=0,t,r,a,i=Object.prototype.toString.call(e);if(i==="[object Object]"?a=Object.create(e.__proto__||null):i==="[object Array]"?a=Array(e.length):i==="[object Set]"?(a=new Set,e.forEach(function(l){a.add(B(l))})):i==="[object Map]"?(a=new Map,e.forEach(function(l,v){a.set(B(v),B(l))})):i==="[object Date]"?a=new Date(+e):i==="[object RegExp]"?a=new RegExp(e.source,e.flags):i==="[object DataView]"?a=new e.constructor(B(e.buffer)):i==="[object ArrayBuffer]"?a=e.slice(0):i.slice(-6)==="Array]"&&(a=new e.constructor(e)),a){for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)Ze(a,r[n],Object.getOwnPropertyDescriptor(e,r[n]));for(n=0,r=Object.getOwnPropertyNames(e);n<r.length;n++)Object.hasOwnProperty.call(a,t=r[n])&&a[t]===e[t]||Ze(a,t,Object.getOwnPropertyDescriptor(e,t))}return a||e}let xe=0;function Kn(e,n){const{value:t,initialValue:r,setInitialValue:a}=gn(e,n.modelValue,n.form),{errorMessage:i,errors:l,setErrors:v}=Jn(e,n.form),y=Yn(t,r,l),s=xe>=Number.MAX_SAFE_INTEGER?0:++xe;function E(V){var F;"value"in V&&(t.value=V.value),"errors"in V&&v(V.errors),"touched"in V&&(y.touched=(F=V.touched)!==null&&F!==void 0?F:y.touched),"initialValue"in V&&a(V.initialValue)}return{id:s,path:e,value:t,initialValue:r,meta:y,errors:l,errorMessage:i,setState:E}}function gn(e,n,t){const r=Z(c(n));function a(){return t?C(t.meta.value.initialValues,c(e),c(r)):c(r)}function i(s){if(!t){r.value=s;return}t.stageInitialValue(c(e),s,!0)}const l=N(a);if(!t)return{value:Z(a()),initialValue:l,setInitialValue:i};const v=n?c(n):C(t.values,c(e),c(l));return t.stageInitialValue(c(e),v,!0),{value:N({get(){return C(t.values,c(e))},set(s){t.setFieldValue(c(e),s)}}),initialValue:l,setInitialValue:i}}function Yn(e,n,t){const r=ze({touched:!1,pending:!1,valid:!0,validated:!!c(t).length,initialValue:N(()=>c(n)),dirty:N(()=>!H(c(e),c(n)))});return x(t,a=>{r.valid=!a.length},{immediate:!0,flush:"sync"}),r}function Jn(e,n){function t(a){return a?Array.isArray(a)?a:[a]:[]}if(!n){const a=Z([]);return{errors:a,errorMessage:N(()=>a.value[0]),setErrors:i=>{a.value=t(i)}}}const r=N(()=>n.errorBag.value[c(e)]||[]);return{errors:r,errorMessage:N(()=>r.value[0]),setErrors:a=>{n.setFieldErrorBag(c(e),t(a))}}}function Xn(e,n,t){return fe(t==null?void 0:t.type)?xn(e,n,t):Vn(e,n,t)}function Vn(e,n,t){const{initialValue:r,validateOnMount:a,bails:i,type:l,checkedValue:v,label:y,validateOnValueUpdate:s,uncheckedValue:E,controlled:V,keepValueOnUnmount:F,modelPropName:_,syncVModel:R,form:G}=Qn(c(e),t),J=V?Le(Oe):void 0,w=G||J;let T=!1;const{id:f,value:m,initialValue:b,meta:h,setState:A,errors:S,errorMessage:k}=Kn(e,{modelValue:r,form:w});R&&et({value:m,prop:_,handleChange:U});const W=()=>{h.touched=!0},D=N(()=>{let d=c(n);const j=c(w==null?void 0:w.schema);return j&&!Ve(j)&&(d=Zn(j,c(e))||d),Ve(d)||de(d)||Array.isArray(d)?d:mn(d)});async function $(d){var j,z;return w!=null&&w.validateSchema?(j=(await w.validateSchema(d)).results[c(e)])!==null&&j!==void 0?j:{valid:!0,errors:[]}:yn(m.value,D.value,{name:c(y)||c(e),values:(z=w==null?void 0:w.values)!==null&&z!==void 0?z:{},bails:i})}const L=Pe(async()=>(h.pending=!0,h.validated=!0,$("validated-only")),d=>(T&&(d.valid=!0,d.errors=[]),A({errors:d.errors}),h.pending=!1,d)),Y=Pe(async()=>$("silent"),d=>(T&&(d.valid=!0),h.valid=d.valid,d));function X(d){return(d==null?void 0:d.mode)==="silent"?Y():L()}function U(d,j=!0){const z=Ge(d);m.value=z,!s&&j&&L()}rn(()=>{if(a)return L();(!w||!w.validateSchema)&&Y()});function K(d){h.touched=d}let ee,ve=B(m.value);function re(){ee=x(m,(d,j)=>{if(H(d,j)&&H(d,ve))return;(s?L:Y)(),ve=B(d)},{deep:!0})}re();function ue(d){var j;ee==null||ee();const z=d&&"value"in d?d.value:b.value;A({value:B(z),initialValue:B(z),touched:(j=d==null?void 0:d.touched)!==null&&j!==void 0?j:!1,errors:(d==null?void 0:d.errors)||[]}),h.pending=!1,h.validated=!1,Y(),he(()=>{re()})}function se(d){m.value=d}function ce(d){A({errors:Array.isArray(d)?d:[d]})}const ie={id:f,name:e,label:y,value:m,meta:h,errors:S,errorMessage:k,type:l,checkedValue:v,uncheckedValue:E,bails:i,keepValueOnUnmount:F,resetField:ue,handleReset:()=>ue(),validate:X,handleChange:U,handleBlur:W,setState:A,setTouched:K,setErrors:ce,setValue:se};if(an(Mn,ie),Se(n)&&typeof c(n)!="function"&&x(n,(d,j)=>{H(d,j)||(h.validated?L():Y())},{deep:!0}),!w)return ie;w.register(ie),ln(()=>{T=!0,w.unregister(ie)});const _e=N(()=>{const d=D.value;return!d||de(d)||Ve(d)||Array.isArray(d)?{}:Object.keys(d).reduce((j,z)=>{const pe=Un(d[z]).map(le=>le.__locatorRef).reduce((le,me)=>{const be=C(w.values,me)||w.values[me];return be!==void 0&&(le[me]=be),le},{});return Object.assign(j,pe),j},{})});return x(_e,(d,j)=>{if(!Object.keys(d).length)return;!H(d,j)&&(h.validated?L():Y())}),ie}function Qn(e,n){const t=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:e,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,modelPropName:"modelValue",syncVModel:!0,controlled:!0});if(!n)return t();const r="valueProp"in n?n.valueProp:n.checkedValue,a="standalone"in n?!n.standalone:n.controlled;return Object.assign(Object.assign(Object.assign({},t()),n||{}),{controlled:a!=null?a:!0,checkedValue:r})}function Zn(e,n){if(!!e)return e[n]}function xn(e,n,t){const r=t!=null&&t.standalone?void 0:Le(Oe),a=t==null?void 0:t.checkedValue,i=t==null?void 0:t.uncheckedValue;function l(v){const y=v.handleChange,s=N(()=>{const V=c(v.value),F=c(a);return Array.isArray(V)?V.findIndex(_=>H(_,F))>=0:H(F,V)});function E(V,F=!0){var _;if(s.value===((_=V==null?void 0:V.target)===null||_===void 0?void 0:_.checked)){F&&v.validate();return}let R=Ge(V);r||(R=Te(c(v.value),c(a),c(i))),y(R,F)}return Object.assign(Object.assign({},v),{checked:s,checkedValue:a,uncheckedValue:i,handleChange:E})}return l(Vn(e,n,t))}function et({prop:e,value:n,handleChange:t}){const r=on();if(!r)return;const a=e||"modelValue",i=`update:${a}`;a in r.props&&(x(n,l=>{H(l,en(r,a))||r.emit(i,l)}),x(()=>en(r,a),l=>{if(l===Ee&&n.value===void 0)return;const v=l===Ee?void 0:l;H(v,Nn(n.value,r.props.modelModifiers))||t(v)}))}function en(e,n){return e.props[n]}we({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>qe().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:Ee},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(e,n){const t=te(e,"rules"),r=te(e,"name"),a=te(e,"label"),i=te(e,"uncheckedValue"),l=te(e,"keepValue"),{errors:v,value:y,errorMessage:s,validate:E,handleChange:V,handleBlur:F,setTouched:_,resetField:R,handleReset:G,meta:J,checked:w,setErrors:T}=Xn(r,t,{validateOnMount:e.validateOnMount,bails:e.bails,standalone:e.standalone,type:n.attrs.type,initialValue:tt(e,n),checkedValue:n.attrs.value,uncheckedValue:i,label:a,validateOnValueUpdate:!1,keepValueOnUnmount:l}),f=function(k,W=!0){V(k,W),n.emit("update:modelValue",y.value)},m=S=>{fe(n.attrs.type)||(y.value=Ge(S))},b=function(k){m(k),n.emit("update:modelValue",y.value)},h=N(()=>{const{validateOnInput:S,validateOnChange:k,validateOnBlur:W,validateOnModelUpdate:D}=nt(e),$=[F,n.attrs.onBlur,W?E:void 0].filter(Boolean),L=[K=>f(K,S),n.attrs.onInput].filter(Boolean),Y=[K=>f(K,k),n.attrs.onChange].filter(Boolean),X={name:e.name,onBlur:$,onInput:L,onChange:Y};X["onUpdate:modelValue"]=K=>f(K,D),fe(n.attrs.type)&&w&&(X.checked=w.value);const U=nn(e,n);return Bn(U,n.attrs)&&(X.value=y.value),X});function A(){return{field:h.value,value:y.value,meta:J,errors:v.value,errorMessage:s.value,validate:E,resetField:R,handleChange:f,handleInput:b,handleReset:G,handleBlur:F,setTouched:_,setErrors:T}}return n.expose({setErrors:T,setTouched:_,reset:R,validate:E,handleChange:V}),()=>{const S=Ue(nn(e,n)),k=Me(S,n,A);return S?Fe(S,Object.assign(Object.assign({},n.attrs),h.value),k):k}}});function nn(e,n){let t=e.as||"";return!e.as&&!n.slots.default&&(t="input"),t}function nt(e){var n,t,r,a;const{validateOnInput:i,validateOnChange:l,validateOnBlur:v,validateOnModelUpdate:y}=qe();return{validateOnInput:(n=e.validateOnInput)!==null&&n!==void 0?n:i,validateOnChange:(t=e.validateOnChange)!==null&&t!==void 0?t:l,validateOnBlur:(r=e.validateOnBlur)!==null&&r!==void 0?r:v,validateOnModelUpdate:(a=e.validateOnModelUpdate)!==null&&a!==void 0?a:y}}function tt(e,n){return fe(n.attrs.type)?Ke(e,"modelValue")?e.modelValue:void 0:Ke(e,"modelValue")?e.modelValue:n.attrs.value}let rt=0;function it(e){var n;const t=rt++,r=new Set;let a=!1;const i=Z({}),l=Z(!1),v=Z(0),y=[],s=ze(B(c(e==null?void 0:e.initialValues)||{})),{errorBag:E,setErrorBag:V,setFieldErrorBag:F}=lt(e==null?void 0:e.initialErrors),_=N(()=>P(E.value).reduce((u,o)=>{const g=E.value[o];return g&&g.length&&(u[o]=g[0]),u},{}));function R(u){const o=i.value[u];return Array.isArray(o)?o[0]:o}function G(u){return!!i.value[u]}const J=N(()=>P(i.value).reduce((u,o)=>{const g=R(o);return g&&(u[o]=c(g.label||g.name)||""),u},{})),w=N(()=>P(i.value).reduce((u,o)=>{var g;const p=R(o);return p&&(u[o]=(g=p.bails)!==null&&g!==void 0?g:!0),u},{})),T=Object.assign({},(e==null?void 0:e.initialErrors)||{}),f=(n=e==null?void 0:e.keepValuesOnUnmount)!==null&&n!==void 0?n:!1,{initialValues:m,originalInitialValues:b,setInitialValues:h}=ut(i,s,e==null?void 0:e.initialValues),A=at(i,s,b,_),S=N(()=>[...r,...P(i.value)].reduce((u,o)=>{const g=C(s,o);return ae(u,o,g),u},{})),k=e==null?void 0:e.validationSchema,W=Xe(We,5),D=Xe(We,5),$=Pe(async u=>await u==="silent"?W():D(),(u,[o])=>{const g=U.fieldsByPath.value||{},p=P(U.errorBag.value);return[...new Set([...P(u.results),...P(g),...p])].reduce((I,M)=>{const q=g[M],ne=(u.results[M]||{errors:[]}).errors,Q={errors:ne,valid:!ne.length};if(I.results[M]=Q,Q.valid||(I.errors[M]=Q.errors[0]),!q)return re(M,ne),I;if(ee(q,ye=>ye.meta.valid=Q.valid),o==="silent")return I;const An=Array.isArray(q)?q.some(ye=>ye.meta.validated):q.meta.validated;return o==="validated-only"&&!An||ee(q,ye=>ye.setState({errors:Q.errors})),I},{valid:u.valid,results:{},errors:{}})});function L(u){return function(g,p){return function(I){return I instanceof Event&&(I.preventDefault(),I.stopPropagation()),j(P(i.value).reduce((M,q)=>(M[q]=!0,M),{})),l.value=!0,v.value++,Ae().then(M=>{const q=B(s);if(M.valid&&typeof g=="function"){const ne=B(S.value);return g(u?ne:q,{evt:I,controlledValues:ne,setErrors:ue,setFieldError:re,setTouched:j,setFieldTouched:d,setValues:ce,setFieldValue:se,resetForm:z})}!M.valid&&typeof p=="function"&&p({values:q,evt:I,errors:M.errors,results:M.results})}).then(M=>(l.value=!1,M),M=>{throw l.value=!1,M})}}}const X=L(!1);X.withControlled=L(!0);const U={formId:t,fieldsByPath:i,values:s,controlledValues:S,errorBag:E,errors:_,schema:k,submitCount:v,meta:A,isSubmitting:l,fieldArrays:y,keepValuesOnUnmount:f,validateSchema:c(k)?$:void 0,validate:Ae,register:me,unregister:be,setFieldErrorBag:F,validateField:Ie,setFieldValue:se,setValues:ce,setErrors:ue,setFieldError:re,setFieldTouched:d,setTouched:j,resetForm:z,handleSubmit:X,stageInitialValue:pn,unsetInitialValue:On,setFieldInitialValue:He,useFieldModel:_e};function K(u){return Array.isArray(u)}function ee(u,o){return Array.isArray(u)?u.forEach(o):o(u)}function ve(u){Object.values(i.value).forEach(o=>{!o||ee(o,u)})}function re(u,o){F(u,o)}function ue(u){V(u)}function se(u,o,{force:g}={force:!1}){var p;const O=i.value[u],I=B(o);if(!O){ae(s,u,I);return}if(K(O)&&((p=O[0])===null||p===void 0?void 0:p.type)==="checkbox"&&!Array.isArray(o)){const q=B(Te(C(s,u)||[],o,void 0));ae(s,u,q);return}let M=o;!K(O)&&O.type==="checkbox"&&!g&&!a&&(M=B(Te(C(s,u),o,c(O.uncheckedValue)))),ae(s,u,M)}function ce(u){P(s).forEach(o=>{delete s[o]}),P(u).forEach(o=>{se(o,u[o])}),y.forEach(o=>o&&o.reset())}function ie(u){const{value:o}=gn(u,void 0,U);return x(o,()=>{G(c(u))||Ae({mode:"validated-only"})},{deep:!0}),r.add(c(u)),o}function _e(u){return Array.isArray(u)?u.map(ie):ie(u)}function d(u,o){const g=i.value[u];g&&ee(g,p=>p.setTouched(o))}function j(u){P(u).forEach(o=>{d(o,!!u[o])})}function z(u){a=!0,ve(o=>o.resetField()),u!=null&&u.values?(h(u.values),ce(u==null?void 0:u.values)):(h(b.value),ce(b.value)),u!=null&&u.touched&&j(u.touched),ue((u==null?void 0:u.errors)||{}),v.value=(u==null?void 0:u.submitCount)||0,he(()=>{a=!1})}function pe(u,o){const g=Sn(u),p=o;if(!i.value[p]){i.value[p]=g;return}const O=i.value[p];O&&!Array.isArray(O)&&(i.value[p]=[O]),i.value[p]=[...i.value[p],g]}function le(u,o){const g=o,p=i.value[g];if(!!p){if(!K(p)&&u.id===p.id){delete i.value[g];return}if(K(p)){const O=p.findIndex(I=>I.id===u.id);if(O===-1)return;p.splice(O,1),p.length||delete i.value[g]}}}function me(u){const o=c(u.name);pe(u,o),Se(u.name)&&x(u.name,async(p,O)=>{await he(),le(u,O),pe(u,p),(_.value[O]||_.value[p])&&(re(O,void 0),Ie(p)),await he(),G(O)||Ce(s,O)});const g=c(u.errorMessage);g&&(T==null?void 0:T[o])!==g&&Ie(o),delete T[o]}function be(u){const o=c(u.name),g=i.value[o],p=!!g&&K(g);le(u,o),he(()=>{var O;const I=(O=c(u.keepValueOnUnmount))!==null&&O!==void 0?O:c(f),M=C(s,o);if(p&&(g===i.value[o]||!i.value[o])&&Array.isArray(M)&&!I){const ne=M.findIndex(Q=>H(Q,c(u.checkedValue)));if(ne>-1){const Q=[...M];Q.splice(ne,1),se(o,Q,{force:!0})}}if(!G(o)){if(re(o,void 0),I||p&&!cn(C(s,o)))return;Ce(s,o)}})}async function Ae(u){if(ve(O=>O.meta.validated=!0),U.validateSchema)return U.validateSchema((u==null?void 0:u.mode)||"force");const o=await Promise.all(Object.values(i.value).map(O=>{const I=Array.isArray(O)?O[0]:O;return I?I.validate(u).then(M=>({key:c(I.name),valid:M.valid,errors:M.errors})):Promise.resolve({key:"",valid:!0,errors:[]})})),g={},p={};for(const O of o)g[O.key]={valid:O.valid,errors:O.errors},O.errors.length&&(p[O.key]=O.errors[0]);return{valid:o.every(O=>O.valid),results:g,errors:p}}async function Ie(u){const o=i.value[u];return o?Array.isArray(o)?o.map(g=>g.validate())[0]:o.validate():(tn(`field with name ${u} was not found`),Promise.resolve({errors:[],valid:!0}))}function On(u){Ce(m.value,u)}function pn(u,o,g=!1){ae(s,u,o),He(u,o),g&&!(e!=null&&e.initialValues)&&ae(b.value,u,B(o))}function He(u,o){ae(m.value,u,B(o))}async function We(){const u=c(k);return u?Ve(u)?await Hn(u,s):await Wn(u,s,{names:J.value,bailsMap:w.value}):{valid:!0,results:{},errors:{}}}const bn=X((u,{evt:o})=>{fn(o)&&o.target.submit()});return rn(()=>{if(e!=null&&e.initialErrors&&ue(e.initialErrors),e!=null&&e.initialTouched&&j(e.initialTouched),e!=null&&e.validateOnMount){Ae();return}U.validateSchema&&U.validateSchema("silent")}),Se(k)&&x(k,()=>{var u;(u=U.validateSchema)===null||u===void 0||u.call(U,"validated-only")}),an(Oe,U),Object.assign(Object.assign({},U),{handleReset:()=>z(),submitForm:bn})}function at(e,n,t,r){const a={touched:"some",pending:"some",valid:"every"},i=N(()=>!H(n,c(t)));function l(){const y=Object.values(e.value).flat(1).filter(Boolean);return P(a).reduce((s,E)=>{const V=a[E];return s[E]=y[V](F=>F.meta[E]),s},{})}const v=ze(l());return Fn(()=>{const y=l();v.touched=y.touched,v.valid=y.valid,v.pending=y.pending}),N(()=>Object.assign(Object.assign({initialValues:c(t)},v),{valid:v.valid&&!P(r.value).length,dirty:i.value}))}function ut(e,n,t){const r=Z(B(c(t))||{}),a=Z(B(c(t))||{});function i(l,v=!1){r.value=B(l),a.value=B(l),v&&P(e.value).forEach(y=>{const s=e.value[y],E=Array.isArray(s)?s.some(F=>F.meta.touched):s==null?void 0:s.meta.touched;if(!s||E)return;const V=C(r.value,y);ae(n,y,B(V))})}return Se(t)&&x(t,l=>{i(l,!0)},{deep:!0}),{initialValues:r,originalInitialValues:a,setInitialValues:i}}function lt(e){const n=Z({});function t(i){return Array.isArray(i)?i:i?[i]:[]}function r(i,l){if(!l){delete n.value[i];return}n.value[i]=t(l)}function a(i){n.value=P(i).reduce((l,v)=>{const y=i[v];return y&&(l[v]=t(y)),l},{})}return e&&a(e),{errorBag:n,setErrorBag:a,setFieldErrorBag:r}}we({name:"Form",inheritAttrs:!1,props:{as:{type:String,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1}},setup(e,n){const t=te(e,"initialValues"),r=te(e,"validationSchema"),a=te(e,"keepValues"),{errors:i,values:l,meta:v,isSubmitting:y,submitCount:s,controlledValues:E,validate:V,validateField:F,handleReset:_,resetForm:R,handleSubmit:G,setErrors:J,setFieldError:w,setFieldValue:T,setValues:f,setFieldTouched:m,setTouched:b}=it({validationSchema:r.value?r:void 0,initialValues:t,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount,keepValuesOnUnmount:a}),h=G((D,{evt:$})=>{fn($)&&$.target.submit()},e.onInvalidSubmit),A=e.onSubmit?G(e.onSubmit,e.onInvalidSubmit):h;function S(D){De(D)&&D.preventDefault(),_(),typeof n.attrs.onReset=="function"&&n.attrs.onReset()}function k(D,$){return G(typeof D=="function"&&!$?D:$,e.onInvalidSubmit)(D)}function W(){return{meta:v.value,errors:i.value,values:l,isSubmitting:y.value,submitCount:s.value,controlledValues:E.value,validate:V,validateField:F,handleSubmit:k,handleReset:_,submitForm:h,setErrors:J,setFieldError:w,setFieldValue:T,setValues:f,setFieldTouched:m,setTouched:b,resetForm:R}}return n.expose({setFieldError:w,setErrors:J,setFieldValue:T,setValues:f,setFieldTouched:m,setTouched:b,resetForm:R,validate:V,validateField:F}),function(){const $=e.as==="form"?e.as:Ue(e.as),L=Me($,n,W);if(!e.as)return L;const Y=e.as==="form"?{novalidate:!0}:{};return Fe($,Object.assign(Object.assign(Object.assign({},Y),n.attrs),{onSubmit:A,onReset:S}),L)}}});function ot(e){const n=Le(Oe,void 0),t=Z([]),r=()=>{},a={fields:t,remove:r,push:r,swap:r,insert:r,update:r,replace:r,prepend:r,move:r};if(!n)return Be("FieldArray requires being a child of `<Form/>` or `useForm` being called before it. Array fields may not work correctly"),a;if(!c(e))return Be("FieldArray requires a field path to be provided, did you forget to pass the `name` prop?"),a;const i=n.fieldArrays.find(f=>c(f.path)===c(e));if(i)return i;let l=0;function v(){const f=C(n==null?void 0:n.values,c(e),[])||[];t.value=f.map(s),y()}v();function y(){const f=t.value.length;for(let m=0;m<f;m++){const b=t.value[m];b.isFirst=m===0,b.isLast=m===f-1}}function s(f){const m=l++;return{key:m,value:N({get(){const h=C(n==null?void 0:n.values,c(e),[])||[],A=t.value.findIndex(S=>S.key===m);return A===-1?f:h[A]},set(h){const A=t.value.findIndex(S=>S.key===m);if(A===-1){Be("Attempting to update a non-existent array item");return}G(A,h)}}),isFirst:!1,isLast:!1}}function E(f){const m=c(e),b=C(n==null?void 0:n.values,m);if(!b||!Array.isArray(b))return;const h=[...b];h.splice(f,1),n==null||n.unsetInitialValue(m+`[${f}]`),n==null||n.setFieldValue(m,h),t.value.splice(f,1),y()}function V(f){const m=c(e),b=C(n==null?void 0:n.values,m),h=ge(b)?[]:b;if(!Array.isArray(h))return;const A=[...h];A.push(f),n==null||n.stageInitialValue(m+`[${A.length-1}]`,f),n==null||n.setFieldValue(m,A),t.value.push(s(f)),y()}function F(f,m){const b=c(e),h=C(n==null?void 0:n.values,b);if(!Array.isArray(h)||!(f in h)||!(m in h))return;const A=[...h],S=[...t.value],k=A[f];A[f]=A[m],A[m]=k;const W=S[f];S[f]=S[m],S[m]=W,n==null||n.setFieldValue(b,A),t.value=S,y()}function _(f,m){const b=c(e),h=C(n==null?void 0:n.values,b);if(!Array.isArray(h)||h.length<f)return;const A=[...h],S=[...t.value];A.splice(f,0,m),S.splice(f,0,s(m)),n==null||n.setFieldValue(b,A),t.value=S,y()}function R(f){const m=c(e);n==null||n.setFieldValue(m,f),v()}function G(f,m){const b=c(e),h=C(n==null?void 0:n.values,b);!Array.isArray(h)||h.length-1<f||n==null||n.setFieldValue(`${b}[${f}]`,m)}function J(f){const m=c(e),b=C(n==null?void 0:n.values,m),h=ge(b)?[]:b;if(!Array.isArray(h))return;const A=[f,...h];n==null||n.stageInitialValue(m+`[${A.length-1}]`,f),n==null||n.setFieldValue(m,A),t.value.unshift(s(f)),y()}function w(f,m){const b=c(e),h=C(n==null?void 0:n.values,b),A=ge(h)?[]:[...h];if(!Array.isArray(h)||!(f in h)||!(m in h))return;const S=[...t.value],k=S[f];S.splice(f,1),S.splice(m,0,k);const W=A[f];A.splice(f,1),A.splice(m,0,W),n==null||n.setFieldValue(b,A),t.value=S,y()}const T={fields:t,remove:E,push:V,swap:F,insert:_,update:G,replace:R,prepend:J,move:w};return n.fieldArrays.push(Object.assign({path:e,reset:v},T)),ln(()=>{const f=n.fieldArrays.findIndex(m=>c(m.path)===c(e));f>=0&&n.fieldArrays.splice(f,1)}),T}we({name:"FieldArray",inheritAttrs:!1,props:{name:{type:String,required:!0}},setup(e,n){const{push:t,remove:r,swap:a,insert:i,replace:l,update:v,prepend:y,move:s,fields:E}=ot(te(e,"name"));function V(){return{fields:E.value,push:t,remove:r,swap:a,insert:i,update:v,replace:l,prepend:y,move:s}}return n.expose({push:t,remove:r,swap:a,insert:i,update:v,replace:l,prepend:y,move:s}),()=>Me(void 0,n,V)}});we({name:"ErrorMessage",props:{as:{type:String,default:void 0},name:{type:String,required:!0}},setup(e,n){const t=un(Oe,void 0),r=N(()=>t==null?void 0:t.errors.value[e.name]);function a(){return{message:r.value}}return()=>{if(!r.value)return;const i=e.as?Ue(e.as):e.as,l=Me(i,n,a),v=Object.assign({role:"alert"},n.attrs);return!i&&(Array.isArray(l)||!l)&&(l==null?void 0:l.length)?l:(Array.isArray(l)||!l)&&!(l!=null&&l.length)?Fe(i||"span",v,r.value):Fe(i,v,l)}}});export{it as u};
